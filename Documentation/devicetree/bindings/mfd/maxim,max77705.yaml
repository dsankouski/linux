# SPDX-License-Identifier: GPL-2.0-only OR BSD-2-Clause
%YAML 1.2
---
$id: http://devicetree.org/schemas/mfd/maxim,max77705.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Maxim MAX77705 Companion Power Management IC and USB Type-C interface IC

maintainers:
  - Dzmitry Sankouski <dsankouski@gmail.com>

description: |
  This is a part of device tree bindings for Maxim MAX77705 multi functional 
  device.

  The Maxim MAX77705 is a Companion Power Management and Type-C
  interface IC which includes charger, fuelgauge, LED, haptic motor driver and
  Type-C management IC.

properties:
  compatible:
    const: maxim,max77705

  reg:
    maxItems: 1

  interrupts:
    maxItems: 1

  charger:
    $ref: /schemas/power/supply/maxim,max77705-charger.yaml

  fuelgauge:
    $ref: /schemas/power/supply/maxim,max77705-fg.yaml

  haptic:
    $ref: /schemas/input/maxim,max77705.yaml

  leds:
    $ref: /schemas/leds/maxim,max77705.yaml


required:
  - compatible

additionalProperties: false

examples:
  - |
    #include <dt-bindings/interrupt-controller/irq.h>
    #include <dt-bindings/leds/common.h>

    i2c14 {
        #address-cells = <1>;
        #size-cells = <0>;

        pmic@66 {
            compatible = "maxim,max77705";
            reg = <0x66>;
            interrupt-parent = <&pm8998_gpios>;
            interrupts = <11 IRQ_TYPE_LEVEL_LOW>;
            interrupt-names = "max77705_irq";
            pinctrl-0 = <&chg_int_default>;
            pinctrl-names = "default";

            leds {
                compatible = "maxim,max77705-led";
                #address-cells = <1>;
                #size-cells = <0>;

                led@1 {
                    reg = <1>;
                    label = "red:usr1";
                };

                led@2 {
                    reg = <2>;
                    label = "green:usr2";
                };

                led@3 {
                    reg = <3>;
                    label = "blue:usr3";
                };
            };

            max77705_charger: charger {
                compatible = "maxim,max77705-charger";
                monitored-battery = <&battery>;
            };

            fuelgauge {
                compatible = "maxim,max77705-fg";
                monitored-battery = <&battery>;
                power-supplies = <&max77705_charger>;
                rsense = <5>;
            };


            haptic {
                compatible = "maxim,max77705-haptic";
                haptic-supply = <&vib_regulator>;
                pwms = <&vib_pwm 0 50000>;
            };
        };
    };
